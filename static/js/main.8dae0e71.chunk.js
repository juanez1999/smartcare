(this.webpackJsonpsmartcare=this.webpackJsonpsmartcare||[]).push([[0],{107:function(e,t,s){},522:function(e,t,s){"use strict";s.r(t);var c=s(0),n=s.n(c),o=s(14),a=s.n(o),r=(s(107),s(20)),i=s(563),u=s(561),l=s(566),d=s(564),j=s(22),h=s(17),b=s(6),O=function(e){var t=e.setUser,s=f(),n=Object(c.useState)(""),o=Object(r.a)(n,2),a=o[0],u=o[1],l=Object(c.useState)(""),O=Object(r.a)(l,2),m=O[0],x=O[1],p=Object(h.e)();return Object(b.jsxs)("div",{className:"login",children:[Object(b.jsx)("img",{className:"login__bg",src:"/smartcare/resources/imgLogin.png",alt:""}),Object(b.jsx)("img",{className:"login__logo",src:"/smartcare/resources/logo.svg",alt:""}),Object(b.jsxs)("form",{className:"login__form",action:"",onSubmit:function(e){e.preventDefault(),j.a.auth().signInWithEmailAndPassword(a,m).then((function(e){t(e),p.push("/home")})).catch((function(e){console.log(e.code),console.log(e.message)}))},children:[Object(b.jsx)(i.a,{id:"standard-basic",label:"Correo electronico",classes:{root:s.root},value:a,onChange:function(e){return u(e.target.value)}}),Object(b.jsx)(i.a,{id:"standard-password-input",label:"Contrase\xf1a",type:"password",autoComplete:"current-password",classes:{root:s.root},value:m,onChange:function(e){return x(e.target.value)}}),Object(b.jsx)(d.a,{variant:"contained",color:"primary",type:"submit",classes:{containedPrimary:s.containedBtn},children:"Iniciar sesi\xf3n"})]})]})},f=Object(u.a)((function(){return Object(l.a)({root:{width:"100%",color:"#1C3496",margin:"20px 0px"},focusedLabel:{color:"#1C3496"},containedBtn:{backgroundColor:"#7250FD",margin:"20px 0px","&:hover":{backgroundColor:"#6039FF"}}})})),m=Object(c.createContext)({user:[""]}),x=function(e){var t=e.title,s=e.idCourse,c=e.schedule,n=e.students,o=Object(h.e)();return Object(b.jsxs)("div",{className:"course",onClick:function(){return function(e){o.push("/courseDetails/"+e)}(s)},children:[Object(b.jsx)("p",{className:"course__schedule",children:c}),Object(b.jsx)("h3",{className:"course__title",children:t}),Object(b.jsx)("p",{className:"course__students",children:n})]})},p=function(){var e,t=Object(c.useContext)(m).user,s=Object(c.useState)(""),o=Object(r.a)(s,2),a=o[0],i=o[1],u=Object(c.useState)([]),l=Object(r.a)(u,2),d=l[0],h=l[1],O=null===t||void 0===t||null===(e=t.user)||void 0===e?void 0:e.uid;return n.a.useEffect((function(){if(O){var e=j.a.firestore();e.collection("users").doc(O).get().then((function(e){e.exists?i(e.data().name):console.log("No such document!")})).catch((function(e){console.log("Error getting document:",e)}));var t=e.collection("users").doc(O).collection("courses").onSnapshot((function(e){var t=[];e.forEach((function(e){t.push(e.data())})),h(t)}));return function(){console.log("component destroyed"),t()}}}),[O]),Object(b.jsxs)("div",{className:"home",children:[Object(b.jsxs)("div",{className:"home__welcome",children:[Object(b.jsxs)("h1",{children:["Bienvenida, ",a]}),Object(b.jsx)("p",{children:"Visualiza tus cursos de hoy y el estado de cada estudiante."})]}),Object(b.jsxs)("div",{className:"home__courses",children:[Object(b.jsx)("h2",{children:"Tus cursos"}),d.map((function(e){return Object(b.jsx)(x,{title:e.title,idCourse:e.id,schedule:e.schedule,students:e.students},e.id)}))]})]})},v=s(567),g=s(562),_=s(565),N=function(e){var t,s=e.idCourse,o=e.nameStudent,a=e.idStudent,i=Object(h.e)(),u=S(),l=Object(c.useState)(""),d=Object(r.a)(l,2),O=d[0],f=d[1],x=Object(c.useContext)(m).user,p=null===x||void 0===x||null===(t=x.user)||void 0===t?void 0:t.uid;var N=["Primer lavado","Segundo lavado","Tercer lavado","Cuarto lavado","Quinto lavado"];return n.a.useEffect((function(){if(p&&s){var e=j.a.firestore().collection("users").doc(p).collection("courses").doc(s).collection("students").doc(a).collection("handWashes").onSnapshot((function(e){var t=[];e.forEach((function(e){t.push(e.data())})),f(t.length)}));return function(){console.log("component destroyed"),e()}}}),[p,s,a]),Object(b.jsxs)("div",{className:"studentCard",onClick:function(){return function(e){i.push("/studentDetails/"+e)}(a)},children:[Object(b.jsx)("h4",{children:o}),Object(b.jsx)("div",{className:"studentCard__timeline",children:Object(b.jsx)(v.a,{activeStep:O,alternativeLabel:!0,classes:{root:u.root},children:N.map((function(e){return Object(b.jsx)(g.a,{children:Object(b.jsx)(_.a,{children:e})},e)}))})})]})},S=Object(u.a)((function(){return Object(l.a)({root:{padding:"0px"}})})),C=function(e){var t,s=e.setIdCourse,o=Object(h.f)().id,a=Object(c.useContext)(m).user,i=null===a||void 0===a||null===(t=a.user)||void 0===t?void 0:t.uid,u=Object(c.useState)([]),l=Object(r.a)(u,2),d=l[0],O=l[1],f=Object(c.useState)([]),x=Object(r.a)(f,2),p=x[0],v=x[1];return n.a.useEffect((function(){if(i&&o){s(o);var e=j.a.firestore();e.collection("users").doc(i).collection("courses").doc(o).get().then((function(e){e.exists?O(e.data()):console.log("No such document!")}));var t=e.collection("users").doc(i).collection("courses").doc(o).collection("students").onSnapshot((function(e){var t=[];e.forEach((function(e){t.push(e.data())})),v(t)}));return function(){console.log("component destroyed"),t()}}}),[i,o,s]),Object(b.jsxs)("div",{className:"courseDetails",children:[Object(b.jsxs)("div",{className:"courseDetails__header",id:d.id,children:[Object(b.jsx)("p",{className:"courseDetails__headerSchedule",children:d.schedule}),Object(b.jsx)("h3",{className:"courseDetails__headerTitle",children:d.title}),Object(b.jsx)("p",{className:"courseDetails__headerStudents",children:d.students})]}),Object(b.jsxs)("div",{className:"courseDetails__washed",children:[Object(b.jsx)("h2",{children:"Lavado de manos"}),p.map((function(e){return Object(b.jsx)(N,{idCourse:o,nameStudent:e.name,idStudent:e.id},e.id)}))]})]})},D=(s(113),s(523),s(33)),w=s(115),y=function(e){var t,s=e.idCourse,o=Object(h.f)().id,a=Object(c.useContext)(m).user,i=null===a||void 0===a||null===(t=a.user)||void 0===t?void 0:t.uid,u=Object(c.useState)([]),l=Object(r.a)(u,2),d=l[0],O=l[1],f=Object(c.useState)(""),x=Object(r.a)(f,2),p=x[0],v=x[1],g=Object(c.useState)([]),_=Object(r.a)(g,2),N=_[0],S=_[1];w.config.update({region:"us-east-1"});new w.DynamoDB.DocumentClient;return n.a.useEffect((function(){if(i&&s){var e=j.a.firestore();e.collection("users").doc(i).collection("courses").doc(s).get().then((function(e){e.exists?O(e.data()):console.log("No such document!")})),e.collection("users").doc(i).collection("courses").doc(s).collection("students").doc(o).get().then((function(e){e.exists?v(e.data()):console.log("No such document!")}));var t=e.collection("users").doc(i).collection("courses").doc(s).collection("students").doc(o).collection("handWashes").onSnapshot((function(e){var t=[];e.forEach((function(e){t.push(e.data())})),S(t)}));return function(){console.log("component destroyed"),t()}}}),[i,s,o]),Object(b.jsxs)("div",{className:"courseDetails",children:[Object(b.jsxs)("div",{className:"courseDetails__header",id:d.id,children:[Object(b.jsx)("p",{className:"courseDetails__headerSchedule",children:d.schedule}),Object(b.jsx)("h3",{className:"courseDetails__headerTitle",children:d.title}),Object(b.jsx)("p",{className:"courseDetails__headerStudents",children:d.students})]}),Object(b.jsxs)("div",{className:"studentDetails",children:[Object(b.jsxs)("div",{className:"studentDetails__name",children:[Object(b.jsx)("img",{src:"/smartcare/resources/backArrow.svg",alt:"",onClick:function(){return window.history.back()}}),Object(b.jsx)("h3",{children:p.name})]}),Object(b.jsx)("p",{children:"Hoy"}),0==N.length&&Object(b.jsx)("div",{className:"studentDetails__wash",children:Object(b.jsx)("p",{children:"No se ha lavado las manos a\xfan"})}),N.map((function(e){return Object(b.jsxs)("div",{className:"studentDetails__wash",children:[Object(b.jsx)("p",{children:"Se lav\xf3 las manos a las:"}),Object(b.jsx)("p",{children:e.hour})]})}))]})]})};j.a.apps.length?j.a.app():j.a.initializeApp({apiKey:"AIzaSyDxh6gfM-1H1NvO9OnU8csCtFj9hswNrN0",authDomain:"smartcareiot-9f3f1.firebaseapp.com",projectId:"smartcareiot-9f3f1",storageBucket:"smartcareiot-9f3f1.appspot.com",messagingSenderId:"133344616870",appId:"1:133344616870:web:f531564e5832a70d5fef67",measurementId:"G-EM6GZ9R1KR"});var E=function(){var e=Object(c.useState)(""),t=Object(r.a)(e,2),s=t[0],o=t[1],a=Object(c.useState)(""),i=Object(r.a)(a,2),u=i[0],l=i[1];return n.a.useEffect((function(){j.a.auth().onAuthStateChanged((function(e,t){e&&o({user:e})}))}),[]),Object(b.jsx)("div",{className:"App",children:Object(b.jsx)(m.Provider,{value:{user:s},children:Object(b.jsxs)(D.a,{children:[Object(b.jsx)(h.a,{path:"/",exact:!0,render:function(){return Object(b.jsx)(O,{setUser:o})}}),Object(b.jsx)(h.a,{path:"/home",render:function(){return Object(b.jsx)(p,{})}}),Object(b.jsx)(h.a,{exact:!0,path:"/courseDetails/:id",render:function(){return Object(b.jsx)(C,{setIdCourse:l})}}),Object(b.jsx)(h.a,{exact:!0,path:"/studentDetails/:id",render:function(){return Object(b.jsx)(y,{idCourse:u})}})]})})})};a.a.render(Object(b.jsx)(n.a.StrictMode,{children:Object(b.jsx)(E,{})}),document.getElementById("root"))},62:function(e,t){}},[[522,1,2]]]);
//# sourceMappingURL=main.8dae0e71.chunk.js.map